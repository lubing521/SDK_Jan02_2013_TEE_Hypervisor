<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>tzhyp_global.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_6aeebb853ebd8c514e6186653c592c82.html">otzone</a></li><li class="navelem"><a class="el" href="dir_fb44076c8b62c63869cf8a830933e50d.html">src</a></li><li class="navelem"><a class="el" href="dir_5054d892aa124e015c653e8232659643.html">arch</a></li><li class="navelem"><a class="el" href="dir_a8ff73de53c273984b8a08f3bd00cae5.html">arm</a></li><li class="navelem"><a class="el" href="dir_0f6da8a9c5259cd162214505231682b4.html">armv7</a></li><li class="navelem"><a class="el" href="dir_314c54530644a99bb6b146f499079a5e.html">include</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">tzhyp_global.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;<a class="el" href="sw__types_8h_source.html">sw_types.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="system__context_8h_source.html">system_context.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="tzhyp__config_8h_source.html">tzhyp_config.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="nsk__boot_8h_source.html">nsk_boot.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__board_8h_source.html">sw_board.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="sw__mcore_8h_source.html">sw_mcore.h</a>&gt;</code><br/>
</div>
<p><a href="tzhyp__global_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a066643f2506655454be4342f325fc557"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a066643f2506655454be4342f325fc557">tzhyp_guest_init</a> (void)</td></tr>
<tr class="separator:a066643f2506655454be4342f325fc557"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4591534998b0845f3bd6f56f2851616b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a4591534998b0845f3bd6f56f2851616b">tzhyp_schedevent_init</a> (void)</td></tr>
<tr class="separator:a4591534998b0845f3bd6f56f2851616b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc2dc4ad4fef314bf988d672c64a65d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a7fc2dc4ad4fef314bf988d672c64a65d">tzhyp_schedule_guest</a> (void)</td></tr>
<tr class="memdesc:a7fc2dc4ad4fef314bf988d672c64a65d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hypervisor scheduler does the job of scheduling between multiple guest OS.  <a href="#a7fc2dc4ad4fef314bf988d672c64a65d"></a><br/></td></tr>
<tr class="separator:a7fc2dc4ad4fef314bf988d672c64a65d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afef274d8d521df4f0df8655ffd370d09"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#afef274d8d521df4f0df8655ffd370d09">tzhyp_device_context_init</a> (void)</td></tr>
<tr class="separator:afef274d8d521df4f0df8655ffd370d09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5182162de4b2dca61076a52abdf56c32"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a5182162de4b2dca61076a52abdf56c32">tzhyp_device_switch</a> (struct <a class="el" href="structsystem__context.html">system_context</a> *, struct <a class="el" href="structsystem__context.html">system_context</a> *)</td></tr>
<tr class="separator:a5182162de4b2dca61076a52abdf56c32"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac4a708cc6e9ff16d2fdca72bcb9062eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#ac4a708cc6e9ff16d2fdca72bcb9062eb">nsk_load</a> (struct <a class="el" href="structnsk__boot__info.html">nsk_boot_info</a> *)</td></tr>
<tr class="separator:ac4a708cc6e9ff16d2fdca72bcb9062eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a510187ef2a59eece79ae2acabb444e85"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystem__context.html">system_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a510187ef2a59eece79ae2acabb444e85">ns_world</a> [MAX_CORES *<a class="el" href="tzhyp__config_8h.html#ad2aff408ca4101ac34537fcfeb70dd9e">GUESTS_NO</a>]</td></tr>
<tr class="memdesc:a510187ef2a59eece79ae2acabb444e85"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non secure task contexts.  <a href="#a510187ef2a59eece79ae2acabb444e85"></a><br/></td></tr>
<tr class="separator:a510187ef2a59eece79ae2acabb444e85"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afd787304ffa6bed1596d22e7bfbd7822"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystem__context.html">system_context</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#afd787304ffa6bed1596d22e7bfbd7822">s_world</a> [1]</td></tr>
<tr class="memdesc:afd787304ffa6bed1596d22e7bfbd7822"><td class="mdescLeft">&#160;</td><td class="mdescRight">Common Secure context.  <a href="#afd787304ffa6bed1596d22e7bfbd7822"></a><br/></td></tr>
<tr class="separator:afd787304ffa6bed1596d22e7bfbd7822"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34c3cf9b08f0d34a32537d6bbc3665e8"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystem__context.html">system_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a34c3cf9b08f0d34a32537d6bbc3665e8">ns_sys_current</a></td></tr>
<tr class="memdesc:a34c3cf9b08f0d34a32537d6bbc3665e8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non secure and Secure context pointers.  <a href="#a34c3cf9b08f0d34a32537d6bbc3665e8"></a><br/></td></tr>
<tr class="separator:a34c3cf9b08f0d34a32537d6bbc3665e8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa867880285ec054bc1daa67267dfb46d"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structsystem__context.html">system_context</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#aa867880285ec054bc1daa67267dfb46d">s_sys_current</a></td></tr>
<tr class="separator:aa867880285ec054bc1daa67267dfb46d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad5ad4a14939d009e137f9355d173fc7f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#ad5ad4a14939d009e137f9355d173fc7f">ns_preempt_flag</a></td></tr>
<tr class="memdesc:ad5ad4a14939d009e137f9355d173fc7f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Non secure preempt flag.  <a href="#ad5ad4a14939d009e137f9355d173fc7f"></a><br/></td></tr>
<tr class="separator:ad5ad4a14939d009e137f9355d173fc7f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a915d3559bb1ef27274bc79bdc9494e9b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a915d3559bb1ef27274bc79bdc9494e9b">ns_switch_flag</a></td></tr>
<tr class="memdesc:a915d3559bb1ef27274bc79bdc9494e9b"><td class="mdescLeft">&#160;</td><td class="mdescRight">NS switch flag to indicate TLB flush.  <a href="#a915d3559bb1ef27274bc79bdc9494e9b"></a><br/></td></tr>
<tr class="separator:a915d3559bb1ef27274bc79bdc9494e9b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab80b84f64b49218bbbc38ea6e4b69bd9"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#ab80b84f64b49218bbbc38ea6e4b69bd9">tzhyp_nsadmin_start</a></td></tr>
<tr class="separator:ab80b84f64b49218bbbc38ea6e4b69bd9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af758da0b088ec96a94f74e7e07d06345"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#af758da0b088ec96a94f74e7e07d06345">tzhyp_nsadmin_end</a></td></tr>
<tr class="separator:af758da0b088ec96a94f74e7e07d06345"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3117cb515b08fecff36245423fdcaa4d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a3117cb515b08fecff36245423fdcaa4d">kernel_start</a></td></tr>
<tr class="separator:a3117cb515b08fecff36245423fdcaa4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac11b6c102a3ef457074e7e9b9de70ed7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#ac11b6c102a3ef457074e7e9b9de70ed7">kernel_end</a></td></tr>
<tr class="separator:ac11b6c102a3ef457074e7e9b9de70ed7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dfb3413d1a95c7e24b746205dad9290"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a3dfb3413d1a95c7e24b746205dad9290">kernel_2_start</a></td></tr>
<tr class="separator:a3dfb3413d1a95c7e24b746205dad9290"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f9f4afccbf62e52546da584b41a26f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a7f9f4afccbf62e52546da584b41a26f4">kernel_2_end</a></td></tr>
<tr class="separator:a7f9f4afccbf62e52546da584b41a26f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a624bf2e844207b8faa044229fedc0723"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a624bf2e844207b8faa044229fedc0723">initrd_image_start</a></td></tr>
<tr class="separator:a624bf2e844207b8faa044229fedc0723"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af709fac04f31ac9b392e81c2332720"><td class="memItemLeft" align="right" valign="top"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="tzhyp__global_8h.html#a5af709fac04f31ac9b392e81c2332720">initrd_image_end</a></td></tr>
<tr class="separator:a5af709fac04f31ac9b392e81c2332720"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="ac4a708cc6e9ff16d2fdca72bcb9062eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nsk_load </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structnsk__boot__info.html">nsk_boot_info</a> *&#160;</td>
          <td class="paramname"><em>ni</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="nsk__loader_8c_source.html#l00047">47</a> of file <a class="el" href="nsk__loader_8c_source.html">nsk_loader.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> i, error;</div>
<div class="line">        <a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> *addr;</div>
<div class="line">        <a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> ns_map_size, s_map_size, aligned_size;</div>
<div class="line">        </div>
<div class="line">        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;nsk load:&quot;</span>);</div>
<div class="line"></div>
<div class="line">        aligned_size = ni-&gt;<a class="code" href="structnsk__boot__info.html#a114279662db830c2ff5b519b34f76172">nskbi_size</a>;</div>
<div class="line">        <span class="comment">/* Align it to the next 1MB */</span></div>
<div class="line">        <span class="keywordflow">if</span> (aligned_size &amp; (<a class="code" href="nsk__loader_8c.html#a0a82fd70402bbdc2259248e735fecbca">MAP_SIZE</a> - 1)) { </div>
<div class="line">                aligned_size = (aligned_size &amp; <a class="code" href="nsk__loader_8c.html#a9acfa53ba535d32d76682f5d3e893c05">ALIGN_MASK</a>) + <a class="code" href="nsk__loader_8c.html#a0a82fd70402bbdc2259248e735fecbca">MAP_SIZE</a>;</div>
<div class="line">        }</div>
<div class="line">        </div>
<div class="line">        ns_map_size = aligned_size;</div>
<div class="line">        <span class="keywordflow">if</span> (ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a> &amp; (<a class="code" href="nsk__loader_8c.html#a0a82fd70402bbdc2259248e735fecbca">MAP_SIZE</a> - 1)) {</div>
<div class="line">                ns_map_size += <a class="code" href="nsk__loader_8c.html#a0a82fd70402bbdc2259248e735fecbca">MAP_SIZE</a>;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* map the non secure area */</span></div>
<div class="line">        error = <a class="code" href="page__table_8h.html#af2bf59cd4cf882f6589c341b5d952524" title="Map a range of non secure memory area as normal memory with attributes Outer and Inner write back...">map_nsmemsect_normal</a>(ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a> &amp; <a class="code" href="nsk__loader_8c.html#a9acfa53ba535d32d76682f5d3e893c05">ALIGN_MASK</a>,</div>
<div class="line">                                     ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a> &amp; <a class="code" href="nsk__loader_8c.html#a9acfa53ba535d32d76682f5d3e893c05">ALIGN_MASK</a>,</div>
<div class="line">                                     ns_map_size);</div>
<div class="line">        <span class="keywordflow">if</span> (error &lt; 0) {</div>
<div class="line">                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;nsk_load: mapping failed\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> error;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        s_map_size = aligned_size;</div>
<div class="line">        <span class="comment">/* start address is assumed to be aligned */</span></div>
<div class="line">        error = <a class="code" href="page__table_8h.html#a288b10ba6b3e5356af9961adf461f54f" title="Map a range of secure memory area.">map_secure_memory</a>(ni-&gt;<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a>, ni-&gt;<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a>, </div>
<div class="line">                                  s_map_size, <a class="code" href="page__table_8h.html#ae2ddeb1f4469c6950e2ea07290b015c5">PTF_PROT_KRW</a>);</div>
<div class="line">        <span class="keywordflow">if</span> (error &lt; 0) {</div>
<div class="line">                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;nsk_load: mapping failed\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> error;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;load addr = %x, startaddr = %x, size = %x\n&quot;</span>, </div>
<div class="line">                  ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a>, ni-&gt;<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a>, ni-&gt;<a class="code" href="structnsk__boot__info.html#a114279662db830c2ff5b519b34f76172">nskbi_size</a>);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Move the ns kernel to the load address */</span></div>
<div class="line">        <a class="code" href="sw__mem__functions_8h.html#a51ad02aba462d7be9a03231afa56de27" title="This version of memcpy assumes disjoint ptrs src, dst.">sw_memcpy</a>((<span class="keywordtype">void</span>*)ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a>, (<span class="keywordtype">void</span>*)ni-&gt;<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a>, </div>
<div class="line">                  ni-&gt;<a class="code" href="structnsk__boot__info.html#a114279662db830c2ff5b519b34f76172">nskbi_size</a>);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cpu_8h.html#a394753c117a76e258bf17fa55a67b1bf">dsb</a>();</div>
<div class="line"></div>
<div class="line">        <a class="code" href="cache_8h.html#a26790473dea7f2879ce3b59948e84e62">flush_cache_all</a>();</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Unmap the non secure area */</span></div>
<div class="line">        <a class="code" href="page__table_8h.html#a6348bfa88047bc937fde445692cb2804" title="Unmap a range of non secure memory area.">unmap_nsmemsect_normal</a>(ni-&gt;<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a>, ns_map_size);</div>
<div class="line"></div>
<div class="line">        <a class="code" href="page__table_8h.html#a052242469f722badd350a69d03e9e88a" title="Unmap a range of secure memory area.">unmap_secure_memory</a>(ni-&gt;<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a>, s_map_size);</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Load initrd */</span></div>
<div class="line">        <span class="keywordflow">if</span> (ni-&gt;<a class="code" href="structnsk__boot__info.html#a9678a706eb505df5558cdf0b269d3987">nskbi_initrd_flag</a>) {</div>
<div class="line">                nsk_initrd_load(ni);</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;Done\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="afef274d8d521df4f0df8655ffd370d09"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tzhyp_device_context_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tzhyp__devices_8c_source.html#l00056">56</a> of file <a class="el" href="tzhyp__devices_8c_source.html">tzhyp_devices.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structsystem__context.html">system_context</a> *primary_ns_world;</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structgic__context.html">gic_context</a> *x;</div>
<div class="line"></div>
<div class="line">        primary_ns_world = (<span class="keyword">struct </span><a class="code" href="structsystem__context.html">system_context</a> *)</div>
<div class="line">                <a class="code" href="tzhyp_8h.html#abf9fcc9d7278b1c97779800931021925">GET_CORE_CONTEXT_BYID</a>(<a class="code" href="tzhyp__global_8h.html#a510187ef2a59eece79ae2acabb444e85" title="Non secure task contexts.">ns_world</a>, 0);</div>
<div class="line">        x = &amp;primary_ns_world-&gt;<a class="code" href="structsystem__context.html#a8e68e63790014e21c4c43c3f4a27e426">sysctxt_gic</a>;</div>
<div class="line"></div>
<div class="line">        gic_dist_save(x);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a5182162de4b2dca61076a52abdf56c32"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tzhyp_device_switch </td>
          <td>(</td>
          <td class="paramtype">struct <a class="el" href="structsystem__context.html">system_context</a> *&#160;</td>
          <td class="paramname"><em>cur</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">struct <a class="el" href="structsystem__context.html">system_context</a> *&#160;</td>
          <td class="paramname"><em>next</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cur</td><td></td></tr>
    <tr><td class="paramname">next</td><td></td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="tzhyp__devices_8c_source.html#l00042">42</a> of file <a class="el" href="tzhyp__devices_8c_source.html">tzhyp_devices.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code" href="cpu_8h.html#a699bd58190ccf9fe1d1609d9f3da8ff1">get_cpu_id</a>() == 0) {</div>
<div class="line">                <span class="comment">/* Save and restore gic state */</span></div>
<div class="line">                gic_dist_save(&amp;cur-&gt;<a class="code" href="structsystem__context.html#a8e68e63790014e21c4c43c3f4a27e426">sysctxt_gic</a>);</div>
<div class="line">                gic_dist_restore(&amp;next-&gt;<a class="code" href="structsystem__context.html#a8e68e63790014e21c4c43c3f4a27e426">sysctxt_gic</a>);</div>
<div class="line">        }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a066643f2506655454be4342f325fc557"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tzhyp_guest_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="tzhyp__boot_8c_source.html#l00067">67</a> of file <a class="el" href="tzhyp__boot_8c_source.html">tzhyp_boot.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> guest;</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Initialize Guest 1 */</span></div>
<div class="line">        guest = 0;</div>
<div class="line">        <span class="comment">/* Assuming both start and load address are 1mb aligned*/</span></div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a> = (<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_start; </div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a> = <a class="code" href="sw__board_8h.html#a4ad9520cf5851eb6621674013368193a">NSK_LOAD_ADDRESS</a>; </div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a114279662db830c2ff5b519b34f76172">nskbi_size</a>  = </div>
<div class="line">                ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_end) - ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_start);</div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a9678a706eb505df5558cdf0b269d3987">nskbi_initrd_flag</a> = 0;</div>
<div class="line">        </div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef CONFIG_MULTI_GUESTS_SUPPORT</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">/* Initialize Guest 2 */</span></div>
<div class="line">        guest = 1;</div>
<div class="line">        <span class="comment">/* Assuming both start and load address are 1mb aligned*/</span></div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a40a531a24f1a7f9253b0811eafd0e1f4">nskbi_srcaddr</a> = (<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_2_start; </div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a54c9fda13cd4eb881cb2560b40f9494a">nskbi_loadaddr</a> = </div>
<div class="line">                <a class="code" href="sw__board_8h.html#a4ad9520cf5851eb6621674013368193a">NSK_LOAD_ADDRESS</a> + <a class="code" href="sw__board_8h.html#a42cb319ce8889ea46165d4d583f19567">GUEST_MEM_SIZE</a>; </div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a114279662db830c2ff5b519b34f76172">nskbi_size</a>  = </div>
<div class="line">                ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_2_end) - ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;kernel_2_start);</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifndef CONFIG_ZYNQ7_BOARD      </span></div>
<div class="line"><span class="preprocessor"></span>        <span class="comment">/* Use initrd for the second guest */</span></div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a9678a706eb505df5558cdf0b269d3987">nskbi_initrd_flag</a> = 1;</div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#afbadb2e0138969ddcbbb89e68275d38b">nskbi_initrd_sa</a> = &amp;<a class="code" href="tzhyp__global_8h.html#a624bf2e844207b8faa044229fedc0723">initrd_image_start</a>;</div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a96777b81dc528eeb26a83e616886512a">nskbi_initrd_la</a> = LINUX_INITRD_ADDR;</div>
<div class="line">        ns_world_binfo[guest].<a class="code" href="structnsk__boot__info.html#a55c267cda6c352da83a2d2fd87d07abc">nskbi_initrd_size</a> = </div>
<div class="line">                ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;initrd_image_end) - ((<a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a>)&amp;initrd_image_start);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        <span class="comment">/* Load all the guests to memory */</span></div>
<div class="line">        tzhyp_load_guests();</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Initialize the register context for all the guests */</span></div>
<div class="line">        tzhyp_guest_context_init();</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a4591534998b0845f3bd6f56f2851616b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int tzhyp_schedevent_init </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<dl class="section return"><dt>Returns</dt><dd></dd></dl>

<p>Definition at line <a class="el" href="tzhyp__sched_8c_source.html#l00108">108</a> of file <a class="el" href="tzhyp__sched_8c_source.html">tzhyp_sched.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef SW_OTZHYP_DEBUG    </span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;tzhyp_schedevent_init\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        tzhypsched_event = <a class="code" href="sw__timer_8h.html#a37105580638257400682808d9dd0d684" title="This function is called to create a new timer event. It allocates the memory for timer event struct...">timer_event_create</a>(&amp;tzhyp_schedevent_handler, </div>
<div class="line">                                              (<span class="keywordtype">void</span>*)<a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>);</div>
<div class="line">        <span class="keywordflow">if</span>(!tzhypsched_event){</div>
<div class="line">                <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;xxx : Cannot register Handler\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* Time duration = 40ms */</span></div>
<div class="line">        tzhypsched_time.<a class="code" href="uniontimeval__t.html#a8ad7ddf26aa2f31d18780864fbbae04c">tval</a>.<a class="code" href="uniontimeval__t.html#a85f38542a8fa84ce968e2297bf8f7487">nsec</a> = 40000000;</div>
<div class="line">        tzhypsched_time.<a class="code" href="uniontimeval__t.html#a8ad7ddf26aa2f31d18780864fbbae04c">tval</a>.<a class="code" href="uniontimeval__t.html#a9c6a9d36de22b39f398f77325ee07539">sec</a> = 0;</div>
<div class="line"></div>
<div class="line">        <a class="code" href="sw__timer_8h.html#ae9578a02129a7b5c79e395fe76d4562c" title="It starts the timer event by calling the appropriate functions The time interval is written to the ha...">timer_event_start</a>(tzhypsched_event, &amp;tzhypsched_time);</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a7fc2dc4ad4fef314bf988d672c64a65d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void tzhyp_schedule_guest </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hypervisor scheduler does the job of scheduling between multiple guest OS. </p>
<p>CPU context switching to a new guest OS For every guest OS there is a cpu register context meant for NS world. Secure world is common across all guest OS. CPU register context involves both core registers and system registers(eg. cp15). a. The sytem register context of the 'current' guest OS(NS world) is saved and the same is restored with that of the 'next' guest OS to be scheduled. b. Saving and restoring of core registers(NS world) is handled by the monitor fiq handler entry and exit path. So we just need to adjust he context pointers so that the right core register context gets restored during exit from the exception.</p>

<p>Definition at line <a class="el" href="tzhyp__sched_8c_source.html#l00049">49</a> of file <a class="el" href="tzhyp__sched_8c_source.html">tzhyp_sched.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keyword">static</span> <span class="keyword">struct </span><a class="code" href="structsystem__context.html">system_context</a> *boundary = &amp;<a class="code" href="tzhyp__global_8h.html#a510187ef2a59eece79ae2acabb444e85" title="Non secure task contexts.">ns_world</a>[0] + <a class="code" href="tzhyp__config_8h.html#ad2aff408ca4101ac34537fcfeb70dd9e">GUESTS_NO</a>;</div>
<div class="line">        <span class="keyword">struct </span><a class="code" href="structsystem__context.html">system_context</a> *<a class="code" href="sw__buddy_8h.html#ad05441302211504d54462741b9a97b3a">current</a>, *next;</div>
<div class="line"><span class="preprocessor">#ifdef SCHEDULE_HIGH_PRIORITY_GUEST</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keyword">static</span> <a class="code" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> <a class="code" href="virtual__keyboard_8c.html#a16ff2d8e15ade4948398b0aeb80124a8">count</a> = 0, low_priority_guest_scheduled = 0;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line"><span class="preprocessor">#ifdef SW_OTZHYP_DEBUG    </span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;tzhyp_sched_guest\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        current = <a class="code" href="tzhyp__global_8h.html#a34c3cf9b08f0d34a32537d6bbc3665e8" title="Non secure and Secure context pointers.">ns_sys_current</a>;       </div>
<div class="line"><span class="preprocessor">#ifdef SCHEDULE_HIGH_PRIORITY_GUEST</span></div>
<div class="line"><span class="preprocessor"></span>        <span class="keywordflow">if</span>(current-&gt;<a class="code" href="structsystem__context.html#abaa5314fa254317d5d7352de34e76be7">guest_no</a> != HIGH_PRIORITY_GUEST)</div>
<div class="line">                low_priority_guest_scheduled = 1;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(low_priority_guest_scheduled &amp;&amp; </div>
<div class="line">        is_guest_irq_active(current-&gt;<a class="code" href="structsystem__context.html#abaa5314fa254317d5d7352de34e76be7">guest_no</a>)) {</div>
<div class="line">        <span class="comment">/* Schedule the low priorty guest @ 800 milli seconds interval</span></div>
<div class="line"><span class="comment">            40ms * 20 = 800 milli seconds */</span></div>
<div class="line">        <span class="keywordflow">if</span>(count &lt; 20) {</div>
<div class="line">            count ++;</div>
<div class="line">            <span class="keywordflow">return</span> current-&gt;<a class="code" href="structsystem__context.html#abaa5314fa254317d5d7352de34e76be7">guest_no</a>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> {</div>
<div class="line">            count = 0;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        next = <a class="code" href="tzhyp__global_8h.html#a34c3cf9b08f0d34a32537d6bbc3665e8" title="Non secure and Secure context pointers.">ns_sys_current</a> + 1;</div>
<div class="line">        <span class="keywordflow">if</span> (next &gt;= boundary) <span class="comment">/* reset to index 0 */</span></div>
<div class="line">                next = <a class="code" href="tzhyp__global_8h.html#a510187ef2a59eece79ae2acabb444e85" title="Non secure task contexts.">ns_world</a>;</div>
<div class="line"><span class="preprocessor">#ifdef SW_OTZHYP_DEBUG    </span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="sw__debug_8h.html#a501cc8c07cf94dc1a6269c0d3ba5a234">sw_printf</a>(<span class="stringliteral">&quot;current = %x, next = %x\n&quot;</span>, current, next);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span></div>
<div class="line">        <a class="code" href="tzhyp__global_8h.html#a34c3cf9b08f0d34a32537d6bbc3665e8" title="Non secure and Secure context pointers.">ns_sys_current</a> = next;  </div>
<div class="line">        <a class="code" href="system__context_8h.html#a899474d506a28251a7e14755af6e337c">tzhyp_sysregs_switch</a>(&amp;current-&gt;<a class="code" href="structsystem__context.html#a7c7c863469000c7b1777c62c4c14fe56">sysctxt_cp15</a>, &amp;next-&gt;<a class="code" href="structsystem__context.html#a7c7c863469000c7b1777c62c4c14fe56">sysctxt_cp15</a>);</div>
<div class="line">        <a class="code" href="tzhyp__global_8h.html#a5182162de4b2dca61076a52abdf56c32">tzhyp_device_switch</a>(current, next);</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a5af709fac04f31ac9b392e81c2332720"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> initrd_image_end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a624bf2e844207b8faa044229fedc0723"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> initrd_image_start</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a7f9f4afccbf62e52546da584b41a26f4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> kernel_2_end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3dfb3413d1a95c7e24b746205dad9290"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> kernel_2_start</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ac11b6c102a3ef457074e7e9b9de70ed7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> kernel_end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a3117cb515b08fecff36245423fdcaa4d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> kernel_start</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ad5ad4a14939d009e137f9355d173fc7f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> ns_preempt_flag</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Non secure preempt flag. </p>

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00060">60</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a915d3559bb1ef27274bc79bdc9494e9b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> ns_switch_flag</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NS switch flag to indicate TLB flush. </p>

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00065">65</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a34c3cf9b08f0d34a32537d6bbc3665e8"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystem__context.html">system_context</a>* ns_sys_current</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Non secure and Secure context pointers. </p>

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00049">49</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="a510187ef2a59eece79ae2acabb444e85"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystem__context.html">system_context</a> ns_world[MAX_CORES *<a class="el" href="tzhyp__config_8h.html#ad2aff408ca4101ac34537fcfeb70dd9e">GUESTS_NO</a>]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Non secure task contexts. </p>

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00039">39</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="aa867880285ec054bc1daa67267dfb46d"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystem__context.html">system_context</a>* s_sys_current</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00055">55</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="afd787304ffa6bed1596d22e7bfbd7822"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structsystem__context.html">system_context</a> s_world[1]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Common Secure context. </p>

<p>Definition at line <a class="el" href="tzhyp_8c_source.html#l00044">44</a> of file <a class="el" href="tzhyp_8c_source.html">tzhyp.c</a>.</p>

</div>
</div>
<a class="anchor" id="af758da0b088ec96a94f74e7e07d06345"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> tzhyp_nsadmin_end</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ab80b84f64b49218bbbc38ea6e4b69bd9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="sw__types_8h.html#a10e94b422ef0c20dcdec20d31a1f5049">u32</a> tzhyp_nsadmin_start</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 3 2013 00:33:53 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
