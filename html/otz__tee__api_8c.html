<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>otz_tee_api.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_0928947d66969185029197c0c35a3cff.html">otz_api</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">otz_tee_api.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="stdlib_8h_source.html">stdlib.h</a>&gt;</code><br/>
<code>#include &lt;unistd.h&gt;</code><br/>
<code>#include &lt;errno.h&gt;</code><br/>
<code>#include &lt;sys/types.h&gt;</code><br/>
<code>#include &lt;sys/stat.h&gt;</code><br/>
<code>#include &lt;sys/ioctl.h&gt;</code><br/>
<code>#include &lt;sys/mman.h&gt;</code><br/>
<code>#include &lt;fcntl.h&gt;</code><br/>
<code>#include &lt;<a class="el" href="string_8h_source.html">string.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__tee__client__api_8h_source.html">otz_tee_client_api.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__client_8h_source.html">otz_client.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__id_8h_source.html">otz_id.h</a>&gt;</code><br/>
<code>#include &lt;<a class="el" href="otz__common_8h_source.html">otz_common.h</a>&gt;</code><br/>
</div>
<p><a href="otz__tee__api_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a015f78683598134139320994260db34c"><td class="memItemLeft" align="right" valign="top">char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a015f78683598134139320994260db34c">TEEC_GetError</a> (int error, int returnOrigin)</td></tr>
<tr class="memdesc:a015f78683598134139320994260db34c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns error string.  <a href="#a015f78683598134139320994260db34c"></a><br/></td></tr>
<tr class="separator:a015f78683598134139320994260db34c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e9d47511b2b76ec947655708cca039f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a3e9d47511b2b76ec947655708cca039f">TEEC_InitializeContext</a> (const char *name, <a class="el" href="structTEEC__Context.html">TEEC_Context</a> *context)</td></tr>
<tr class="memdesc:a3e9d47511b2b76ec947655708cca039f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize Context.  <a href="#a3e9d47511b2b76ec947655708cca039f"></a><br/></td></tr>
<tr class="separator:a3e9d47511b2b76ec947655708cca039f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ff39851efe335623922e6f800f3113b"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a8ff39851efe335623922e6f800f3113b">TEEC_FinalizeContext</a> (<a class="el" href="structTEEC__Context.html">TEEC_Context</a> *context)</td></tr>
<tr class="memdesc:a8ff39851efe335623922e6f800f3113b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finalizes an initialized TEE context.  <a href="#a8ff39851efe335623922e6f800f3113b"></a><br/></td></tr>
<tr class="separator:a8ff39851efe335623922e6f800f3113b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8358037528cb0d29d57f1da4fdb12d23"><td class="memItemLeft" align="right" valign="top"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a8358037528cb0d29d57f1da4fdb12d23">TEEC_AllocateSharedMemory</a> (<a class="el" href="structTEEC__Context.html">TEEC_Context</a> *context, <a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *sharedMem)</td></tr>
<tr class="memdesc:a8358037528cb0d29d57f1da4fdb12d23"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate a shared memory block.  <a href="#a8358037528cb0d29d57f1da4fdb12d23"></a><br/></td></tr>
<tr class="separator:a8358037528cb0d29d57f1da4fdb12d23"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae95c1a0a68654f50a280d94581859d76"><td class="memItemLeft" align="right" valign="top"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#ae95c1a0a68654f50a280d94581859d76">TEEC_RegisterSharedMemory</a> (<a class="el" href="structTEEC__Context.html">TEEC_Context</a> *context, <a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *sharedMem)</td></tr>
<tr class="memdesc:ae95c1a0a68654f50a280d94581859d76"><td class="mdescLeft">&#160;</td><td class="mdescRight">Register a allocated shared memory block.  <a href="#ae95c1a0a68654f50a280d94581859d76"></a><br/></td></tr>
<tr class="separator:ae95c1a0a68654f50a280d94581859d76"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a28ced54521d6576f50cbd8743dbfa1e9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a28ced54521d6576f50cbd8743dbfa1e9">TEEC_ReleaseSharedMemory</a> (<a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *sharedMem)</td></tr>
<tr class="memdesc:a28ced54521d6576f50cbd8743dbfa1e9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Release a shared memory block.  <a href="#a28ced54521d6576f50cbd8743dbfa1e9"></a><br/></td></tr>
<tr class="separator:a28ced54521d6576f50cbd8743dbfa1e9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2e057c67c5ec43b8052ad89809929e61"><td class="memItemLeft" align="right" valign="top"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a2e057c67c5ec43b8052ad89809929e61">TEEC_OpenSession</a> (<a class="el" href="structTEEC__Context.html">TEEC_Context</a> *context, <a class="el" href="structTEEC__Session.html">TEEC_Session</a> *session, const <a class="el" href="otz__tee__client__api_8h.html#a361ded2dff83f4a00e85cdc7c8a04274">TEEC_UUID</a> *destination, <a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> connectionMethod, const void *connectionData, <a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *operation, <a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *returnOrigin)</td></tr>
<tr class="memdesc:a2e057c67c5ec43b8052ad89809929e61"><td class="mdescLeft">&#160;</td><td class="mdescRight">Open a session with a Trusted application.  <a href="#a2e057c67c5ec43b8052ad89809929e61"></a><br/></td></tr>
<tr class="separator:a2e057c67c5ec43b8052ad89809929e61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abbd4e86c7d7a2830b66dd1c455e57708"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#abbd4e86c7d7a2830b66dd1c455e57708">TEEC_CloseSession</a> (<a class="el" href="structTEEC__Session.html">TEEC_Session</a> *session)</td></tr>
<tr class="memdesc:abbd4e86c7d7a2830b66dd1c455e57708"><td class="mdescLeft">&#160;</td><td class="mdescRight">Closes a session which has been opened with trusted application.  <a href="#abbd4e86c7d7a2830b66dd1c455e57708"></a><br/></td></tr>
<tr class="separator:abbd4e86c7d7a2830b66dd1c455e57708"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a33d421ce57c64600db759fe55bd0541e"><td class="memItemLeft" align="right" valign="top"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#a33d421ce57c64600db759fe55bd0541e">TEEC_InvokeCommand</a> (<a class="el" href="structTEEC__Session.html">TEEC_Session</a> *session, <a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> commandID, <a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *operation, <a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *returnOrigin)</td></tr>
<tr class="memdesc:a33d421ce57c64600db759fe55bd0541e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Invokes a command within the specified session.  <a href="#a33d421ce57c64600db759fe55bd0541e"></a><br/></td></tr>
<tr class="separator:a33d421ce57c64600db759fe55bd0541e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab0f689a7da4d607e46fe9f8d7dba277c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="otz__tee__api_8c.html#ab0f689a7da4d607e46fe9f8d7dba277c">TEEC_RequestCancellation</a> (<a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *operation)</td></tr>
<tr class="memdesc:ab0f689a7da4d607e46fe9f8d7dba277c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Requests the cancellation of a pending open Session operation or a Command invocation operation.  <a href="#ab0f689a7da4d607e46fe9f8d7dba277c"></a><br/></td></tr>
<tr class="separator:ab0f689a7da4d607e46fe9f8d7dba277c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a8358037528cb0d29d57f1da4fdb12d23"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a> TEEC_AllocateSharedMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Context.html">TEEC_Context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *&#160;</td>
          <td class="paramname"><em>sharedMem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Allocate a shared memory block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context,:</td><td>Pointer to the context </td></tr>
    <tr><td class="paramname">sharedMem,:</td><td>Pointer to the shared memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TEEC_Result: TEEC_SUCCESS: The allocation was successful. <br/>
 TEEC_ERROR_*: An implementation-defined error code for any other error. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00204">204</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> mmap_flags;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(context == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sharedMem == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_AllocateSharedMemory : Error Illegal argument\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>((sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#ade465778b424b13ee99e044c2a221af8">size</a> == 0) ||</div>
<div class="line">        ((sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca8407d60bc4211cd205bdf111c3ce512c">TEEC_MEM_INPUT</a>) &amp;&amp; </div>
<div class="line">         (sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca4d822f60ca1969d1513b14b2805b234e">TEEC_MEM_OUTPUT</a>) &amp;&amp; </div>
<div class="line">         (sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != (<a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca8407d60bc4211cd205bdf111c3ce512c">TEEC_MEM_INPUT</a> | <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca4d822f60ca1969d1513b14b2805b234e">TEEC_MEM_OUTPUT</a>)))) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_AllocateSharedMemory : Error Illegal argument\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line"></div>
<div class="line">    mmap_flags = PROT_READ | PROT_WRITE;</div>
<div class="line"></div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> = mmap(0, sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#ade465778b424b13ee99e044c2a221af8">size</a>,</div>
<div class="line">                        mmap_flags , MAP_SHARED,</div>
<div class="line">                        context-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, 0);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> == MAP_FAILED) {</div>
<div class="line">        perror(<span class="stringliteral">&quot;TEEC_AllocateSharedMemory - mmap failed\n&quot;</span>); </div>
<div class="line">        sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#adde3813dfcdccd8cd15846d626763260">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">        sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fac4927fa5eae4d0446bb2aa422f0d244f">TEEC_ERROR_OUT_OF_MEMORY</a>;</div>
<div class="line">    }</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af662eccaf65008ef806549dda52368f1">allocated</a> = 1;</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7532915172f8700fd0687bd12df96980">context</a> = context;</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af5682d369305070e83514a18cc2a2260">operation_count</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a04c50f42331105464d2eb3d66cc4e8eb">head_ref</a>);</div>
<div class="line">    list_add_tail(&amp;context-&gt;<a class="code" href="structTEEC__Context.html#aeb59522c8cdeefc9afcf4b458846a286">shared_mem_list</a>, &amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a04c50f42331105464d2eb3d66cc4e8eb">head_ref</a>);</div>
<div class="line">    context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a>++;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="abbd4e86c7d7a2830b66dd1c455e57708"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TEEC_CloseSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Session.html">TEEC_Session</a> *&#160;</td>
          <td class="paramname"><em>session</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Closes a session which has been opened with trusted application. </p>
<p>Close a opened session between client and trusted application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session,:</td><td>Pointer to the session structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00444">444</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret = 0;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structser__ses__id.html" title="Session details structure.">ser_ses_id</a> ses_close;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(session == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_CloseSession: Warning: Session pointer is NULL\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(session-&gt;<a class="code" href="structTEEC__Session.html#ae21202e1d124456453722861aee399aa">operation_cnt</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_CloseSession: Warning: Pending operations %d\n&quot;</span>, </div>
<div class="line">            session-&gt;<a class="code" href="structTEEC__Session.html#ae21202e1d124456453722861aee399aa">operation_cnt</a>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    ses_close.service_id = session-&gt;<a class="code" href="structTEEC__Session.html#aa2fc5ceee64cdc8d7f3e3b83c82c1be3">service_id</a> ;</div>
<div class="line">    ses_close.session_id = session-&gt;<a class="code" href="structTEEC__Session.html#a00ba158c15263804225042278230d3b1">session_id</a> ;</div>
<div class="line"></div>
<div class="line">    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>,</div>
<div class="line">                <a class="code" href="otz__client_8h.html#a4d3f346f8ed5d6932d3f8a47ecd06585">OTZ_CLIENT_IOCTL_SES_CLOSE_REQ</a>, &amp;ses_close);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret == 0){</div>
<div class="line">        session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a>--;</div>
<div class="line">        session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">        session-&gt;<a class="code" href="structTEEC__Session.html#a00ba158c15263804225042278230d3b1">session_id</a> = -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        perror(<span class="stringliteral">&quot;TEEC_CloseSession: Session client close request failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a8ff39851efe335623922e6f800f3113b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TEEC_FinalizeContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Context.html">TEEC_Context</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finalizes an initialized TEE context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context,:</td><td>An initialized <a class="el" href="structTEEC__Context.html" title="The TEEC_Context structure is used to contain control information related to the TEE.">TEEC_Context</a> structure which is to be finalized. </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00167">167</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(!context)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(context-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a> != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;warning: pending open sessions %d\n&quot;</span>, </div>
<div class="line">                    context-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a> != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;warning: unreleased shared memory blocks %d\n&quot;</span>, </div>
<div class="line">                    context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>( (context-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a> == 0) &amp;&amp; (context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a> == 0)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;device closed \n&quot;</span>);</div>
<div class="line">        <a class="code" href="virtual__keyboard__app_8c.html#ae8a3b46baffb627f3917b08c4b84c49d">close</a>(context-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>);</div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a> = 0;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a015f78683598134139320994260db34c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char* TEEC_GetError </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>error</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>returnOrigin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns error string. </p>
<p>This function returns the error string value based on error number and return origin.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">error,:</td><td>Error number. </td></tr>
    <tr><td class="paramname">returnOrigin,:</td><td>Origin of the return.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>char*: Error string value. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00099">99</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{                        </div>
<div class="line">    <span class="keywordflow">if</span>(returnOrigin == <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fcac1e440c31589196e83b79353fcf5ebce">TEEC_ORIGIN_TRUSTED_APP</a>)   </div>
<div class="line">        <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)TEEC_service_errorlist[error];  </div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        <span class="keywordflow">return</span> (<span class="keywordtype">char</span>*)TEEC_errorlist[error];  </div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a3e9d47511b2b76ec947655708cca039f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a> TEEC_InitializeContext </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__Context.html">TEEC_Context</a> *&#160;</td>
          <td class="paramname"><em>context</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize Context. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name,:</td><td>A zero-terminated string that describes the TEE to connect to. If this parameter is set to NULL the Implementation MUST select a default TEE.</td></tr>
    <tr><td class="paramname">context,:</td><td>A <a class="el" href="structTEEC__Context.html" title="The TEEC_Context structure is used to contain control information related to the TEE.">TEEC_Context</a> structure that MUST be initialized by the Implementation.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TEEC_Result: TEEC_SUCCESS: The initialization was successful. <br/>
 TEEC_ERROR_*: An implementation-defined error code for any other error. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00120">120</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret=0;</div>
<div class="line">    <span class="keywordtype">char</span> temp_name[256];</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(context == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_InitializeContext : Context is null\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(name == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line"><span class="preprocessor">#ifdef OTZ_DEBUG</span></div>
<div class="line"><span class="preprocessor"></span>        printf(<span class="stringliteral">&quot;%s is assigned as default context\n&quot;</span>, </div>
<div class="line">            <a class="code" href="otz__client_8h.html#aece194c75f564c1efd000bb0cde9a911">OTZ_CLIENT_FULL_PATH_DEV_NAME</a> );</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>        <a class="code" href="libc__sos_8h.html#a0bdde5c387a0682534e738d2c212d58a">strcpy</a>(temp_name, <a class="code" href="otz__client_8h.html#aece194c75f564c1efd000bb0cde9a911">OTZ_CLIENT_FULL_PATH_DEV_NAME</a>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> {</div>
<div class="line">        <a class="code" href="libc__sos_8h.html#a0bdde5c387a0682534e738d2c212d58a">strcpy</a>(temp_name, name);</div>
<div class="line">    }</div>
<div class="line">    ret = open(temp_name, O_RDWR); </div>
<div class="line">    <span class="keywordflow">if</span>( ret == -1){</div>
<div class="line">        perror(<span class="stringliteral">&quot;TEEC_InitializeContext : device open failed\n&quot;</span>);</div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#a33bf223f26ee1b208b0cdc5ead6a7bcf">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fae90c214f5f14bdcd9cfa2fffd5baa877">TEEC_ERROR_GENERIC</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span>{</div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a> = ret ;</div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a> = 0;</div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a> = 0;</div>
<div class="line">        <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;context-&gt;<a class="code" href="structTEEC__Context.html#aeb59522c8cdeefc9afcf4b458846a286">shared_mem_list</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"><span class="preprocessor">#ifdef OTZ_DEBUG</span></div>
<div class="line"><span class="preprocessor"></span>    printf(<span class="stringliteral">&quot;TEEC_InitializeContext success\n&quot;</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="preprocessor"></span>    <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a33d421ce57c64600db759fe55bd0541e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a> TEEC_InvokeCommand </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Session.html">TEEC_Session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>commandID</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>returnOrigin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Invokes a command within the specified session. </p>
<p>Invokes a command within the session.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">session,:</td><td>Pointer to session </td></tr>
    <tr><td class="paramname">commandID,:</td><td>Command ID </td></tr>
    <tr><td class="paramname">operation,:</td><td>Pointer to operation structure </td></tr>
    <tr><td class="paramname">returnOrigin,:</td><td>Pointer to the return origin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TEEC_Result: TEEC_SUCCESS: The command was successfully invoked. <br/>
 TEEC_ERROR_*: An implementation-defined error code for any other error. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00488">488</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">        <span class="keywordtype">int</span> ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>;</div>
<div class="line">    <span class="keywordtype">int</span> rel_ret;</div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> inout = 0; <span class="comment">/* in = 0; out = 1; inout = 2 */</span></div>
<div class="line">    <a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> param_types[4], param_count;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structotz__client__encode__cmd.html" title="Encode command structure.">otz_client_encode_cmd</a> enc;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(session == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_InvokeCommand : Illegal argument\n&quot;</span>);    </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    enc.encode_id = -1;</div>
<div class="line">    enc.cmd_id = commandID;</div>
<div class="line">    enc.service_id = session-&gt;<a class="code" href="structTEEC__Session.html#aa2fc5ceee64cdc8d7f3e3b83c82c1be3">service_id</a> ;</div>
<div class="line">    enc.session_id = session-&gt;<a class="code" href="structTEEC__Session.html#a00ba158c15263804225042278230d3b1">session_id</a> ;</div>
<div class="line"></div>
<div class="line"><span class="comment">/* Need to support cancellation in future releases */</span></div>
<div class="line">    <span class="keywordflow">if</span>(operation &amp;&amp; !operation-&gt;<a class="code" href="structTEEC__Operation.html#a7eae7fcad883d4d78c9daef00fe08e6c">started</a>) {</div>
<div class="line">        printf(</div>
<div class="line">            <span class="stringliteral">&quot;TEEC_InvokeCommand : cancellation support not yet implemented\n&quot;</span>);   </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4179635876af36d07712ab79da64afa7">TEEC_ERROR_NOT_IMPLEMENTED</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#ae21202e1d124456453722861aee399aa">operation_cnt</a>++;</div>
<div class="line"><span class="comment">/* Encode the data */</span></div>
<div class="line">    <span class="keywordflow">if</span>(operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> != 0) {</div>
<div class="line">        param_types[0] = operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> &amp; 0xf;</div>
<div class="line">        param_types[1] = (operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> &gt;&gt; 4) &amp; 0xf;        </div>
<div class="line">        param_types[2] = (operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> &gt;&gt; 8) &amp; 0xf;        </div>
<div class="line">        param_types[3] = (operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> &gt;&gt; 12) &amp; 0xf;        </div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">for</span>(param_count = 0; param_count &lt; 4; param_count++) {</div>
<div class="line">            <span class="keywordflow">if</span>( (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9ae062e0502be2f5372812053a3d1fc031">TEEC_VALUE_INPUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0d3155a759f5f3ea299be0a493ee4924">TEEC_VALUE_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9ad8e807bd3166fb18b91917a42426323b">TEEC_VALUE_OUTPUT</a>)) {</div>
<div class="line">                enc.data = (<span class="keywordtype">void</span>*)&amp;operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#a9092e5e087843ebfc5d7cfa40f04a1c2">a</a>;</div>
<div class="line">                enc.len  = <span class="keyword">sizeof</span>(<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9ae062e0502be2f5372812053a3d1fc031">TEEC_VALUE_INPUT</a>)</div>
<div class="line">                    inout = 0;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9ad8e807bd3166fb18b91917a42426323b">TEEC_VALUE_OUTPUT</a>)</div>
<div class="line">                    inout = 1;</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0d3155a759f5f3ea299be0a493ee4924">TEEC_VALUE_INOUT</a>)</div>
<div class="line">                    inout = 2;</div>
<div class="line">                                </div>
<div class="line">                <span class="keywordflow">if</span>((inout == 0) | (inout == 2))</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 1)</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line"></div>
<div class="line">                ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                            <a class="code" href="otz__client_8h.html#ac6a8a73b9377df5e63f60dfbf9163fbb">OTZ_CLIENT_IOCTL_ENC_UINT32</a>, &amp;enc);</div>
<div class="line">                <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: encoding value data failed\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#ac6a8a73b9377df5e63f60dfbf9163fbb">OTZ_CLIENT_IOCTL_ENC_UINT32</a>, &amp;enc);</div>
<div class="line">                    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                        perror(</div>
<div class="line">                            <span class="stringliteral">&quot;TEEC_InvokeCommand: encoding value data failed\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(<a class="code" href="otz__tee__client__api_8h.html#a8cee8c3207cf162f74fe0e6832640a72">TEEC_VALUE_UNDEF</a> != </div>
<div class="line">                    operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#ad6cef620e07a83dabbc6220020ee47b5">b</a>) {</div>
<div class="line">                    enc.data = (<span class="keywordtype">void</span>*)&amp;operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#ad6cef620e07a83dabbc6220020ee47b5">b</a>;</div>
<div class="line">                    enc.len  = <span class="keyword">sizeof</span>(<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>);</div>
<div class="line">                    <span class="keywordflow">if</span>((inout == 0) | (inout == 2))</div>
<div class="line">                        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 1)</div>
<div class="line">                        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line"></div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#ac6a8a73b9377df5e63f60dfbf9163fbb">OTZ_CLIENT_IOCTL_ENC_UINT32</a>, &amp;enc);</div>
<div class="line">                    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                        perror(</div>
<div class="line">                            <span class="stringliteral">&quot;TEEC_InvokeCommand: encoding value data failed\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                        enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line">                        ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                    <a class="code" href="otz__client_8h.html#ac6a8a73b9377df5e63f60dfbf9163fbb">OTZ_CLIENT_IOCTL_ENC_UINT32</a>, &amp;enc);</div>
<div class="line">                        <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                            <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                                *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                            session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                            perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">encoding value data failed\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">                            <span class="keywordflow">break</span>;</div>
<div class="line">                        }</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            } <span class="comment">/* end if for TEEC_VALUE check */</span></div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a83a852a82f09a38ddd6358bf83084dda">TEEC_MEMREF_PARTIAL_INPUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>)) {</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(!operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa8f1a521bf548e65263e0a9984414682f">TEEC_ERROR_NO_DATA</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference parent is NULL\n&quot;</span>);</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">break</span>; </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(!operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa8f1a521bf548e65263e0a9984414682f">TEEC_ERROR_NO_DATA</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference parent data is NULL\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>; </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a83a852a82f09a38ddd6358bf83084dda">TEEC_MEMREF_PARTIAL_INPUT</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(!(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> </div>
<div class="line">                                        &amp; <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca8407d60bc4211cd205bdf111c3ce512c">TEEC_MEM_INPUT</a>)) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad73f0656c5965302e08498f884d5d915">TEEC_ERROR_BAD_FORMAT</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference direction is invalid\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(!(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> </div>
<div class="line">                                        &amp; <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca4d822f60ca1969d1513b14b2805b234e">TEEC_MEM_OUTPUT</a>)) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad73f0656c5965302e08498f884d5d915">TEEC_ERROR_BAD_FORMAT</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference direction is invalid\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(!(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> </div>
<div class="line">                                        &amp; TEEC_MEM_INPUT)) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad73f0656c5965302e08498f884d5d915">TEEC_ERROR_BAD_FORMAT</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference direction is invalid\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">if</span>(!(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> </div>
<div class="line">                                        &amp; TEEC_MEM_OUTPUT)) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad73f0656c5965302e08498f884d5d915">TEEC_ERROR_BAD_FORMAT</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference direction is invalid\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>((param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a83a852a82f09a38ddd6358bf83084dda">TEEC_MEMREF_PARTIAL_INPUT</a>) || </div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>)) {</div>
<div class="line">                    <span class="keywordflow">if</span>((operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a8951871c92918826408dfedc4156ee20">offset</a> + </div>
<div class="line">                            operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a2d86e5093bb7930fcc70730ad73ab103">size</a> &gt; </div>
<div class="line">                                operation-&gt;</div>
<div class="line">                                    params[param_count].memref.parent-&gt;size) ) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4065d670c507f8631394171af3ffe090">TEEC_ERROR_EXCESS_DATA</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">memory reference offset + size is greater than the actual memory size\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }                </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a83a852a82f09a38ddd6358bf83084dda">TEEC_MEMREF_PARTIAL_INPUT</a>) {</div>
<div class="line">                    inout = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] </div>
<div class="line">                            == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>) {</div>
<div class="line">                    inout = 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] </div>
<div class="line">                            == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) {</div>
<div class="line">                    inout = 2;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) {</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(operation-&gt;</div>
<div class="line">                            params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            (TEEC_MEM_INPUT | TEEC_MEM_OUTPUT))</div>
<div class="line">                        inout = 2;</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(operation-&gt;</div>
<div class="line">                            params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            TEEC_MEM_INPUT)</div>
<div class="line">                        inout = 0;</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(operation-&gt;</div>
<div class="line">                            params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            TEEC_MEM_OUTPUT)</div>
<div class="line">                        inout = 1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) {</div>
<div class="line">                    enc.len = operation-&gt;</div>
<div class="line">                                params[param_count].memref.parent-&gt;size;</div>
<div class="line">                    enc.offset = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    enc.len  = operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a2d86e5093bb7930fcc70730ad73ab103">size</a>;</div>
<div class="line">                    enc.offset = operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a8951871c92918826408dfedc4156ee20">offset</a>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(inout == 0) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a7aa74f7037354b0cd675442b600060c0">OTZ_MEM_SERVICE_RO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 1) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a8035deccf29fcd9fe345e3f3e0e4accb">OTZ_MEM_SERVICE_WO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a7aa74f7037354b0cd675442b600060c0">OTZ_MEM_SERVICE_RO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#af662eccaf65008ef806549dda52368f1">allocated</a>) {</div>
<div class="line">                    enc.data = </div>
<div class="line">                        operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a5246c33b96861a607d173c5b9a6cf5f8">parent</a>-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a>;</div>
<div class="line"></div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#a1e9c448543d21734707fff1c2ca516c7">OTZ_CLIENT_IOCTL_ENC_MEM_REF</a>, &amp;enc);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    enc.data = </div>
<div class="line">                        (<span class="keywordtype">void</span>*) ((<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>)operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].</div>
<div class="line">                                memref.parent-&gt;buffer + </div>
<div class="line">                                enc.offset);</div>
<div class="line">                    enc.offset = 0;</div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#a5191da7defc442a4fd60f2db6127313a">OTZ_CLIENT_IOCTL_ENC_ARRAY</a>, &amp;enc);</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span> (ret){</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">encoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line"><span class="comment">/*                     operation-&gt;</span></div>
<div class="line"><span class="comment">                        params[param_count].memref.parent-&gt;operation_count++; */</span></div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a8035deccf29fcd9fe345e3f3e0e4accb">OTZ_MEM_SERVICE_WO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span>(operation-&gt;</div>
<div class="line">                        params[param_count].memref.parent-&gt;allocated) {</div>
<div class="line">                        ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                    <a class="code" href="otz__client_8h.html#a1e9c448543d21734707fff1c2ca516c7">OTZ_CLIENT_IOCTL_ENC_MEM_REF</a>, &amp;enc);</div>
<div class="line">                    }</div>
<div class="line">                    <span class="keywordflow">else</span> {</div>
<div class="line">                        ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                    <a class="code" href="otz__client_8h.html#a5191da7defc442a4fd60f2db6127313a">OTZ_CLIENT_IOCTL_ENC_ARRAY</a>, &amp;enc);</div>
<div class="line">                    }</div>
<div class="line"></div>
<div class="line">                    <span class="keywordflow">if</span> (ret){</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">encoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            } <span class="comment">/* end if for TEEC_MEM_REF check */</span></div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>((param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a08f93f6ac7c6615ff26838e8fa4e441d">TEEC_MEMREF_TEMP_INPUT</a>) ||</div>
<div class="line">               (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a40a27415d0c255d58f1fad5287879785">TEEC_MEMREF_TEMP_OUTPUT</a>) ||</div>
<div class="line">               (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a61b21cbecaf1827ddca58f49b2176748">TEEC_MEMREF_TEMP_INOUT</a>)) {</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(!operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#abb1df8a9d3c54299a3de780e49f2fe92">tmpref</a>.<a class="code" href="structTEEC__TempMemoryReference.html#a814ab10dfaa7eca1fe81f572342ae325">buffer</a>) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa8f1a521bf548e65263e0a9984414682f">TEEC_ERROR_NO_DATA</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">temporary memory reference buffer is NULL\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>; </div>
<div class="line">                }</div>
<div class="line">                <span class="comment">/* This is a variation of API spec. */</span></div>
<div class="line">                <span class="keywordflow">if</span>(operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#abb1df8a9d3c54299a3de780e49f2fe92">tmpref</a>.<a class="code" href="structTEEC__TempMemoryReference.html#ae6076f1360d7b8bbdf79e7b22f45fc29">size</a> == 0) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa8f1a521bf548e65263e0a9984414682f">TEEC_ERROR_NO_DATA</a>;</div>
<div class="line">                    printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">temporary memory reference size zero is not supported\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>; </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a08f93f6ac7c6615ff26838e8fa4e441d">TEEC_MEMREF_TEMP_INPUT</a>) {</div>
<div class="line">                    inout = 0;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] </div>
<div class="line">                            == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a40a27415d0c255d58f1fad5287879785">TEEC_MEMREF_TEMP_OUTPUT</a>) {</div>
<div class="line">                    inout = 1;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(param_types[param_count] </div>
<div class="line">                            == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a61b21cbecaf1827ddca58f49b2176748">TEEC_MEMREF_TEMP_INOUT</a>) {</div>
<div class="line">                    inout = 2;</div>
<div class="line">                }  </div>
<div class="line">                enc.len  = operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#abb1df8a9d3c54299a3de780e49f2fe92">tmpref</a>.<a class="code" href="structTEEC__TempMemoryReference.html#ae6076f1360d7b8bbdf79e7b22f45fc29">size</a>;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(inout == 0) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a7aa74f7037354b0cd675442b600060c0">OTZ_MEM_SERVICE_RO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 1) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a8035deccf29fcd9fe345e3f3e0e4accb">OTZ_MEM_SERVICE_WO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a7aa74f7037354b0cd675442b600060c0">OTZ_MEM_SERVICE_RO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052af60016bf7987a1ce074d83f028f07614">OTZC_PARAM_IN</a>; </div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                enc.data = </div>
<div class="line">                    operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#abb1df8a9d3c54299a3de780e49f2fe92">tmpref</a>.<a class="code" href="structTEEC__TempMemoryReference.html#a814ab10dfaa7eca1fe81f572342ae325">buffer</a>;</div>
<div class="line">                ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                            <a class="code" href="otz__client_8h.html#a5191da7defc442a4fd60f2db6127313a">OTZ_CLIENT_IOCTL_ENC_ARRAY</a>, &amp;enc);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span> (ret){</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">encoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(inout == 2) {</div>
<div class="line">                    enc.flags = <a class="code" href="otz__api_8h.html#a0726f9cc52e17d8e6cd7dd085cc62527a8035deccf29fcd9fe345e3f3e0e4accb">OTZ_MEM_SERVICE_WO</a>;</div>
<div class="line">                    enc.param_type = <a class="code" href="otz__common_8h.html#a792f9d4615b444fce1b56b3c7b6e8052a53a3f6b1183de5cf3cf9c9d564b164bc">OTZC_PARAM_OUT</a>; </div>
<div class="line"></div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#a5191da7defc442a4fd60f2db6127313a">OTZ_CLIENT_IOCTL_ENC_ARRAY</a>, &amp;enc);</div>
<div class="line">                    <span class="keywordflow">if</span> (ret){</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">encoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                }</div>
<div class="line">            } <span class="comment">/* end if for temp reference */</span></div>
<div class="line">        }<span class="comment">/* end for */</span></div>
<div class="line">    } <span class="comment">/* end paramtype */</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;error in encoding the data\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">goto</span> operation_release;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="comment">/* Invoke the command */</span></div>
<div class="line">    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>,</div>
<div class="line">                    <a class="code" href="otz__client_8h.html#a74d70f914f878eeceecf69ee64912a9b">OTZ_CLIENT_IOCTL_SEND_CMD_REQ</a>, &amp;enc);</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret &lt; 0){</div>
<div class="line">        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line"></div>
<div class="line">        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line"></div>
<div class="line">        <span class="keywordflow">if</span>(ret == -EFAULT)</div>
<div class="line">         ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad409d8880e3ce9fc7f4828a87257d955">TEEC_ERROR_ACCESS_DENIED</a>;</div>
<div class="line">        <span class="keywordflow">if</span>(ret == -EINVAL)</div>
<div class="line">         ret = <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line"></div>
<div class="line">        perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">command submission in client driver failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ret &gt; 0) {</div>
<div class="line">        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fcac1e440c31589196e83b79353fcf5ebce">TEEC_ORIGIN_TRUSTED_APP</a>;</div>
<div class="line"></div>
<div class="line">        <span class="comment">/* check the service error code match with global platform </span></div>
<div class="line"><span class="comment">            error constants */</span></div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">command submission failed in trusted application - %s\n&quot;</span>, </div>
<div class="line">        <a class="code" href="otz__tee__client__api_8h.html#a015f78683598134139320994260db34c" title="Returns error string.">TEEC_GetError</a>(ret, <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fcac1e440c31589196e83b79353fcf5ebce">TEEC_ORIGIN_TRUSTED_APP</a>));</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret != 0) {</div>
<div class="line">        <span class="keywordflow">goto</span> operation_release;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line"></div>
<div class="line"><span class="comment">/* Decode the data */</span> </div>
<div class="line">    <span class="keywordflow">if</span>(operation-&gt;<a class="code" href="structTEEC__Operation.html#afd2f1c406a61de0f0595824295bcb050">paramTypes</a> != 0) {</div>
<div class="line">        <span class="keywordflow">for</span>(param_count = 0; param_count &lt; 4; param_count++) {</div>
<div class="line"></div>
<div class="line">            <span class="keywordflow">if</span>((param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0d3155a759f5f3ea299be0a493ee4924">TEEC_VALUE_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9ad8e807bd3166fb18b91917a42426323b">TEEC_VALUE_OUTPUT</a>)) {</div>
<div class="line">                enc.len  = <span class="keyword">sizeof</span>(<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>);</div>
<div class="line"></div>
<div class="line">                ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                            <a class="code" href="otz__client_8h.html#a3a906c6822ed16423cf394d12c4eee26">OTZ_CLIENT_IOCTL_DEC_UINT32</a>, &amp;enc);</div>
<div class="line">                <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">decoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#a9092e5e087843ebfc5d7cfa40f04a1c2">a</a> = *((<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>*)enc.data);</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(<a class="code" href="otz__tee__client__api_8h.html#a8cee8c3207cf162f74fe0e6832640a72">TEEC_VALUE_UNDEF</a> != operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#ad6cef620e07a83dabbc6220020ee47b5">b</a>) {</div>
<div class="line">                    enc.len  = <span class="keyword">sizeof</span>(<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>);</div>
<div class="line">                    ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                                <a class="code" href="otz__client_8h.html#a3a906c6822ed16423cf394d12c4eee26">OTZ_CLIENT_IOCTL_DEC_UINT32</a>, &amp;enc);</div>
<div class="line">                    <span class="keywordflow">if</span> (ret) {</div>
<div class="line">                        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                        session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">decoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                        <span class="keywordflow">break</span>;</div>
<div class="line">                    }</div>
<div class="line">                    operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a819a08a56fe8d2cbbeb4a4409d60c975">value</a>.<a class="code" href="structTEEC__Value.html#ad6cef620e07a83dabbc6220020ee47b5">b</a> = </div>
<div class="line">                                                *((<a class="code" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>*)enc.data);</div>
<div class="line">                }</div>
<div class="line">            } <span class="comment">/* end if for TEEC_VALUE check */</span></div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span>( (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a61b21cbecaf1827ddca58f49b2176748">TEEC_MEMREF_TEMP_INOUT</a>) ||</div>
<div class="line">                (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a40a27415d0c255d58f1fad5287879785">TEEC_MEMREF_TEMP_OUTPUT</a>)) {</div>
<div class="line"></div>
<div class="line">                inout = 2;</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) {   </div>
<div class="line">                    <span class="keywordflow">if</span>(operation-&gt;</div>
<div class="line">                            params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            (TEEC_MEM_INPUT | TEEC_MEM_OUTPUT))</div>
<div class="line">                        inout = 2;</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(operation</div>
<div class="line">                            -&gt;params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            TEEC_MEM_INPUT)</div>
<div class="line">                        inout = 0;</div>
<div class="line">                    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(operation</div>
<div class="line">                            -&gt;params[param_count].memref.parent-&gt;flags == </div>
<div class="line">                            TEEC_MEM_OUTPUT)</div>
<div class="line">                        inout = 1;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>(inout == 0)</div>
<div class="line">                    <span class="keywordflow">continue</span>;</div>
<div class="line"></div>
<div class="line">                ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                            <a class="code" href="otz__client_8h.html#a85758d78a3f7a7d60fd05b5561ca7e66">OTZ_CLIENT_IOCTL_DEC_ARRAY_SPACE</a>, &amp;enc);</div>
<div class="line">                <span class="keywordflow">if</span> (ret){</div>
<div class="line">                    <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">                        *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line">                    session-&gt;<a class="code" href="structTEEC__Session.html#ad23a0825971ef9d621f36eb05035c7da">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">                    perror(<span class="stringliteral">&quot;TEEC_InvokeCommand: \</span></div>
<div class="line"><span class="stringliteral">decoding data in client driver failed\n&quot;</span>);</div>
<div class="line">                    <span class="keywordflow">break</span>;</div>
<div class="line">                }</div>
<div class="line"></div>
<div class="line">                <span class="keywordflow">if</span>( (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a0fde2e095c933376a0360788e2dd7f90">TEEC_MEMREF_WHOLE</a>) ||</div>
<div class="line">                    (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a530eefe7668b93a6e6a5e02d70233cd3">TEEC_MEMREF_PARTIAL_INOUT</a>) ||</div>
<div class="line">                    (param_types[param_count] == <a class="code" href="otz__tee__client__api_8h.html#a844239ef6fbb152b5e83b296be117fa9a3b0c66b1008718e5108fe84da60fafe0">TEEC_MEMREF_PARTIAL_OUTPUT</a>)) {</div>
<div class="line">                    operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#a341d29a495da6914bb99b0af853c4fd1">memref</a>.<a class="code" href="structTEEC__RegisteredMemoryReference.html#a2d86e5093bb7930fcc70730ad73ab103">size</a> = enc.len;</div>
<div class="line">                }</div>
<div class="line">                <span class="keywordflow">else</span> {</div>
<div class="line">                    operation-&gt;<a class="code" href="structTEEC__Operation.html#a7c40ba20ef6ab4bcbd5a75e2c577e011">params</a>[param_count].<a class="code" href="unionTEEC__Parameter.html#abb1df8a9d3c54299a3de780e49f2fe92">tmpref</a>.<a class="code" href="structTEEC__TempMemoryReference.html#ae6076f1360d7b8bbdf79e7b22f45fc29">size</a> = enc.len;</div>
<div class="line">                }</div>
<div class="line">            } <span class="comment">/* end if for TEEC_MEM_REF check */</span></div>
<div class="line">        }<span class="comment">/* end for */</span></div>
<div class="line">    } <span class="comment">/* end paramtype */</span></div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret != <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;error in decoding the data\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line">operation_release:</div>
<div class="line">    <span class="comment">/* release the operation */</span></div>
<div class="line">    rel_ret = ioctl(session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a>-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>, </div>
<div class="line">                    <a class="code" href="otz__client_8h.html#a96a3275839a04f4d4380cfab6b977ea2">OTZ_CLIENT_IOCTL_OPERATION_RELEASE</a>, &amp;enc);</div>
<div class="line">    <span class="keywordflow">if</span> (rel_ret){</div>
<div class="line">        perror(<span class="stringliteral">&quot;Operation release failed\n&quot;</span>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#ae21202e1d124456453722861aee399aa">operation_cnt</a>--;</div>
<div class="line">    <span class="keywordflow">return</span> ret;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a2e057c67c5ec43b8052ad89809929e61"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a> TEEC_OpenSession </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Context.html">TEEC_Context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__Session.html">TEEC_Session</a> *&#160;</td>
          <td class="paramname"><em>session</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="otz__tee__client__api_8h.html#a361ded2dff83f4a00e85cdc7c8a04274">TEEC_UUID</a> *&#160;</td>
          <td class="paramname"><em>destination</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a>&#160;</td>
          <td class="paramname"><em>connectionMethod</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const void *&#160;</td>
          <td class="paramname"><em>connectionData</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *&#160;</td>
          <td class="paramname"><em>operation</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="otz__api_8h.html#a435d1572bf3f880d55459d9805097f62">uint32_t</a> *&#160;</td>
          <td class="paramname"><em>returnOrigin</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Open a session with a Trusted application. </p>
<p>Opens a new session between client and trusted application.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context,:</td><td>Pointer to the context </td></tr>
    <tr><td class="paramname">session,:</td><td>Pointer to the session </td></tr>
    <tr><td class="paramname">destination,:</td><td>Service UUID </td></tr>
    <tr><td class="paramname">connectionMethod,:</td><td>Connection method </td></tr>
    <tr><td class="paramname">connectionData,:</td><td>Connection data used for authentication </td></tr>
    <tr><td class="paramname">operation,:</td><td>Pointer to optional operation structure </td></tr>
    <tr><td class="paramname">returnOrigin,:</td><td>Pointer to the return origin</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TEEC_Result: TEEC_SUCCESS: The session was successfully opened. <br/>
 TEEC_ERROR_*: An implementation-defined error code for any other error. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00348">348</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordtype">int</span> ret;</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structser__ses__id.html" title="Session details structure.">ser_ses_id</a> ses_open;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>((context == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) || (session == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) ||</div>
<div class="line">        (destination == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>)) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_OpenSession : Error Illegal argument\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">switch</span>(connectionMethod) {</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cda8bb5b8a7dfc0334f90ed7407dd4ddd9d">TEEC_LOGIN_PUBLIC</a>: {</div>
<div class="line">            <span class="keywordflow">if</span>(connectionData != <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;TEEC_OpenSession : connection method requires \</span></div>
<div class="line"><span class="stringliteral">empty connection data\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;            </div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cda8c6ad7380cec6f7fa09c852247f4abed">TEEC_LOGIN_USER</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cda3cc79d313bb7bcb1aa9d52614682d08a">TEEC_LOGIN_APPLICATION</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cda646983f0da4bbdd6f96d64681dd31e73">TEEC_LOGIN_USER_APPLICATION</a>: {</div>
<div class="line">            <span class="keywordflow">if</span>(connectionData != <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;TEEC_OpenSession : connection method requires \</span></div>
<div class="line"><span class="stringliteral">empty connection data\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;            </div>
<div class="line">            }</div>
<div class="line">            printf(<span class="stringliteral">&quot;TEEC_OpenSession : connection method \</span></div>
<div class="line"><span class="stringliteral">is not implemented \n&quot;</span>);</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4179635876af36d07712ab79da64afa7">TEEC_ERROR_NOT_IMPLEMENTED</a>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cdac1e52a37c3e8e6829c5e0c232756cc76">TEEC_LOGIN_GROUP</a>:</div>
<div class="line">        <span class="keywordflow">case</span> <a class="code" href="otz__tee__client__api_8h.html#acea56784d3146198a50dca0fb5b2a7cda53642939ec71bb330122acdabff4bc22">TEEC_LOGIN_GROUP_APPLICATION</a>: {</div>
<div class="line">            <span class="keywordflow">if</span>(connectionData == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">                printf(<span class="stringliteral">&quot;TEEC_OpenSession : connection method requires \</span></div>
<div class="line"><span class="stringliteral">valid connection data\n&quot;</span>);</div>
<div class="line">                <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;            </div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4179635876af36d07712ab79da64afa7">TEEC_ERROR_NOT_IMPLEMENTED</a>;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    ses_open.service_id = *destination;</div>
<div class="line"></div>
<div class="line">    ret = ioctl(context-&gt;<a class="code" href="structTEEC__Context.html#a33f0bc3b43f53a2daf1dbafc82e3a804">fd</a>,</div>
<div class="line">                <a class="code" href="otz__client_8h.html#a44cde702959998cc55975d32b57f5556">OTZ_CLIENT_IOCTL_SES_OPEN_REQ</a>, &amp;ses_open);    </div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(ret &lt; 0){</div>
<div class="line">        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fca8f66dc5e481382d361fd654fb9e42ed1">TEEC_ORIGIN_API</a>;</div>
<div class="line"></div>
<div class="line">        context-&gt;<a class="code" href="structTEEC__Context.html#a33bf223f26ee1b208b0cdc5ead6a7bcf">s_errno</a> = <a class="code" href="sw__filelib_8h.html#ad65a8842cc674e3ddf69355898c0ecbf">errno</a>;</div>
<div class="line">        </div>
<div class="line">        perror(<span class="stringliteral">&quot;TEEC_OpenSession: Session client open request failed\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">if</span>(ret == -<a class="code" href="sw__filelib_8h.html#a6a05c923dad0c1208043e9c20a58c8e5">ENOMEM</a>)</div>
<div class="line">            <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fac4927fa5eae4d0446bb2aa422f0d244f">TEEC_ERROR_OUT_OF_MEMORY</a>;</div>
<div class="line">        <span class="keywordflow">if</span>(ret == -EFAULT)</div>
<div class="line">         <span class="keywordflow">return</span>  <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fad409d8880e3ce9fc7f4828a87257d955">TEEC_ERROR_ACCESS_DENIED</a>;</div>
<div class="line">        <span class="keywordflow">if</span>(ret == -EINVAL)</div>
<div class="line">         <span class="keywordflow">return</span>  <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">        </div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fae90c214f5f14bdcd9cfa2fffd5baa877">TEEC_ERROR_GENERIC</a>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(ret &gt; 0) {</div>
<div class="line">        <span class="keywordflow">if</span>(returnOrigin)</div>
<div class="line">            *returnOrigin = <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fcac1e440c31589196e83b79353fcf5ebce">TEEC_ORIGIN_TRUSTED_APP</a>;</div>
<div class="line"></div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_OpenSession: service return error -  %s\n&quot;</span>,</div>
<div class="line">            <a class="code" href="otz__tee__client__api_8h.html#a015f78683598134139320994260db34c" title="Returns error string.">TEEC_GetError</a>(ret, <a class="code" href="otz__tee__client__api_8h.html#a7cec7a0d1fa340adc3d3186b6eeb63fcac1e440c31589196e83b79353fcf5ebce">TEEC_ORIGIN_TRUSTED_APP</a>) );</div>
<div class="line">        <span class="keywordflow">return</span> ret;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    context-&gt;<a class="code" href="structTEEC__Context.html#aab72b42cacee05486d681a2c7aa34fcd">session_count</a>++;</div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#ae21202e1d124456453722861aee399aa">operation_cnt</a> = 0;</div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#a00ba158c15263804225042278230d3b1">session_id</a> = ses_open.session_id;</div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#aa2fc5ceee64cdc8d7f3e3b83c82c1be3">service_id</a> = *destination;</div>
<div class="line">    session-&gt;<a class="code" href="structTEEC__Session.html#ab72c9ecca6e5cb3d7b10ff75754549bb">device</a> = context;</div>
<div class="line">    </div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ae95c1a0a68654f50a280d94581859d76"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7f">TEEC_Result</a> TEEC_RegisterSharedMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Context.html">TEEC_Context</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *&#160;</td>
          <td class="paramname"><em>sharedMem</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Register a allocated shared memory block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context,:</td><td>Pointer to the context </td></tr>
    <tr><td class="paramname">sharedMem,:</td><td>Pointer to the shared memory</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>TEEC_Result: TEEC_SUCCESS: The device was successfully opened. <br/>
 TEEC_ERROR_*: An implementation-defined error code for any other error. </dd></dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00258">258</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span>(context == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> || sharedMem == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a> ) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_AllocateSharedMemory : Error Illegal argument\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>((sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#ade465778b424b13ee99e044c2a221af8">size</a> == 0) ||</div>
<div class="line">        ((sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca8407d60bc4211cd205bdf111c3ce512c">TEEC_MEM_INPUT</a>) &amp;&amp; </div>
<div class="line">         (sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca4d822f60ca1969d1513b14b2805b234e">TEEC_MEM_OUTPUT</a>) &amp;&amp; </div>
<div class="line">         (sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a952af666858535b863b162a8b9e53e0c">flags</a> != (<a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca8407d60bc4211cd205bdf111c3ce512c">TEEC_MEM_INPUT</a> | <a class="code" href="otz__tee__client__api_8h.html#ad2ca265b0a012cb196691e4037b558dca4d822f60ca1969d1513b14b2805b234e">TEEC_MEM_OUTPUT</a>)))) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_AllocateSharedMemory : Error Illegal argument\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_RegisterSharedMemory :shared memory buffer is NULL\n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4b7583ef234ccb0ef6f7492ee6e8200d">TEEC_ERROR_BAD_PARAMETERS</a>;</div>
<div class="line">    }</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af662eccaf65008ef806549dda52368f1">allocated</a> = 0;</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7532915172f8700fd0687bd12df96980">context</a> = context;</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af5682d369305070e83514a18cc2a2260">operation_count</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="sw__list_8h.html#a0ffe9d28c36d7b018a9cfae33bae45c0">INIT_LIST_HEAD</a>(&amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a04c50f42331105464d2eb3d66cc4e8eb">head_ref</a>);</div>
<div class="line">    list_add_tail(&amp;context-&gt;<a class="code" href="structTEEC__Context.html#aeb59522c8cdeefc9afcf4b458846a286">shared_mem_list</a>, &amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a04c50f42331105464d2eb3d66cc4e8eb">head_ref</a>);</div>
<div class="line">    context-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a>++;</div>
<div class="line">    <span class="keywordflow">return</span> <a class="code" href="otz__tee__api_8h.html#a586a43c1886aa09dc9541fb66e6d8d7fa4d19c2c024e37edc5f04892bb6739dbe">TEEC_SUCCESS</a>;</div>
<div class="line"></div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="a28ced54521d6576f50cbd8743dbfa1e9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TEEC_ReleaseSharedMemory </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__SharedMemory.html">TEEC_SharedMemory</a> *&#160;</td>
          <td class="paramname"><em>sharedMem</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Release a shared memory block. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">sharedMem,:</td><td>Pointer to the shared memory </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l00295">295</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keyword">struct </span><a class="code" href="structlist.html">list</a> *l;</div>
<div class="line">    <a class="code" href="structTEEC__SharedMemory.html" title="The TEEC_SharedMemory structure is used to contain control information related to a block of shared m...">TEEC_SharedMemory</a>* tempSharedMem;</div>
<div class="line">    <span class="keywordtype">int</span> found = 0;</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(sharedMem == <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>){</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span>(sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af5682d369305070e83514a18cc2a2260">operation_count</a> != 0) {</div>
<div class="line">        printf(<span class="stringliteral">&quot;TEEC_ReleaseSharedMemory - pending operations count %d\n&quot;</span>, </div>
<div class="line">                sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af5682d369305070e83514a18cc2a2260">operation_count</a>);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#af662eccaf65008ef806549dda52368f1">allocated</a>) {</div>
<div class="line">        munmap(sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a>, sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#ade465778b424b13ee99e044c2a221af8">size</a>);</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7ced755c88a53bfadc0354fe1e33e0f9">buffer</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#ade465778b424b13ee99e044c2a221af8">size</a> = 0;</div>
<div class="line"></div>
<div class="line">    <a class="code" href="sw__list_8h.html#abeae4779f478cbb5e1d437e6853c77c5">list_for_each</a>(l, &amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7532915172f8700fd0687bd12df96980">context</a>-&gt;<a class="code" href="structTEEC__Context.html#aeb59522c8cdeefc9afcf4b458846a286">shared_mem_list</a>) {</div>
<div class="line">        tempSharedMem = <a class="code" href="sw__list_8h.html#a26c976b7f654e70df318c1843e5094de">list_entry</a>(l, <a class="code" href="structTEEC__SharedMemory.html" title="The TEEC_SharedMemory structure is used to contain control information related to a block of shared m...">TEEC_SharedMemory</a>, head_ref);</div>
<div class="line">        <span class="keywordflow">if</span> (tempSharedMem == sharedMem) {</div>
<div class="line">            found = 1;</div>
<div class="line">            <span class="keywordflow">break</span>;</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"></div>
<div class="line">    <span class="keywordflow">if</span>(found) {</div>
<div class="line">        list_del(&amp;sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a04c50f42331105464d2eb3d66cc4e8eb">head_ref</a>);</div>
<div class="line">        sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7532915172f8700fd0687bd12df96980">context</a>-&gt;<a class="code" href="structTEEC__Context.html#adceafa85960b8f7ee684a540e8aa932f">shared_mem_cnt</a>--;</div>
<div class="line">    }</div>
<div class="line">    sharedMem-&gt;<a class="code" href="structTEEC__SharedMemory.html#a7532915172f8700fd0687bd12df96980">context</a> = <a class="code" href="sw__types_8h.html#a070d2ce7b6bb7e5c05602aa8c308d0c4">NULL</a>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
<a class="anchor" id="ab0f689a7da4d607e46fe9f8d7dba277c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void TEEC_RequestCancellation </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structTEEC__Operation.html">TEEC_Operation</a> *&#160;</td>
          <td class="paramname"><em>operation</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Requests the cancellation of a pending open Session operation or a Command invocation operation. </p>
<p>Request cancellation of pending open session or command invocation.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">operation,:</td><td>Pointer to TEEC operation structure </td></tr>
  </table>
  </dd>
</dl>

<p>Definition at line <a class="el" href="otz__tee__api_8c_source.html#l01018">1018</a> of file <a class="el" href="otz__tee__api_8c_source.html">otz_tee_api.c</a>.</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="keywordflow">return</span>;</div>
<div class="line">}</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Jan 3 2013 00:33:52 by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.2
</small></address>
</body>
</html>
